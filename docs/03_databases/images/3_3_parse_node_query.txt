%%{init: {"theme":"base"}}%%
sequenceDiagram
    actor User
    participant GraphModel
    participant ConnectionInterface
    participant SPARQL Queries
    participant Database

    note right of User: Creates new GraphModel

    User ->>+ GraphModel: GraphModel(container)
    GraphModel ->>+ ConnectionInterface: create_new_graph(container)
    ConnectionInterface ->>+ SPARQL Queries: get_all_nodes_from_container()
    SPARQL Queries -->>- ConnectionInterface: str[query text]
    ConnectionInterface ->>+ Database: execute(query_text)
    Database -->>- ConnectionInterface: json[query response]
    %% ConnectionInterface ->> ConnectionInterface: parse_node_query()
    note over ConnectionInterface: Parse Node Query Results

    loop For each result in query response
        ConnectionInterface ->> ConnectionInterface: Parse Equipment JSON-LD

        %% alt equipment class in data profile
        %%     ConnectionInterface ->>+ ConnectionInterface: create_object(Equipment Object)
        %% else equipment class not in data profile
        %%     ConnectionInterface ->> ConnectionInterface: log warning
        %% end

        ConnectionInterface ->>+ ConnectionInterface: create_object(Equipment)
        ConnectionInterface ->>+ ConnectionInterface: create_object(ConnectivityNode)
        ConnectionInterface ->>+ ConnectionInterface: create_object(Terminal)
        ConnectionInterface ->>+ ConnectionInterface: create_object(Measurement)

    end

    ConnectionInterface -->>- GraphModel: dict[type, uuid]
    GraphModel -->>- User: network object
